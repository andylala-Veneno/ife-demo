<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>ife -- 淡入淡出按钮</title>
	<style type="text/css"></style>
</head>
<body>
	<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
	<button id="fade-btn">淡出</button>
    <script>
    	var oDiv = document.getElementById("fade-obj"),
    		oBtn = document.getElementById("fade-btn"),
    		opacity = 1,
    		bool = true;
    	oBtn.onclick = function(){
    		function fadeOut(){
    			oBtn.disabled = true;
    			opacity -= 0.01;
    			if(opacity <= 0){
    				opacity = 0;
    			}
    			oDiv.style.opacity = opacity;
    			var fadeOutTimer = setTimeout(fadeOut,1000/60);
    			if(opacity === 0){
    				clearTimeout(fadeOutTimer);
    				oBtn.disabled = false;
    				bool = false;
    				oBtn.innerHTML = "淡入";
    			}
    		}
    		function fadeIn(){
    			oBtn.disabled = true;
    			opacity += 0.01;
    			if(opacity >= 1){
    				opacity = 1;
    			}
    			oDiv.style.opacity = opacity;
    			var fadeInTimer = setTimeout(fadeIn,1000/60);
    			if(opacity === 1){
    				clearTimeout(fadeInTimer);
    				oBtn.disabled = false;
    				bool = true;
    				oBtn.innerHTML = "淡出";
    			}
    		}
    		if(bool){
    			fadeOut();
    		}
    		else{
    			fadeIn();
    		}
    	}
    </script>
</body>
</html>